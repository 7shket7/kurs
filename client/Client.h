#ifndef CLIENT_H
#define CLIENT_H

#include <string>

/**
 * @brief Структура для хранения конфигурации клиента
 * @details Содержит все настройки, необходимые для работы клиентского приложения:
 * параметры подключения к серверу, имена файлов и учетные данные.
 */
struct ClientConfig {
    std::string serverAddress;  ///< Адрес сервера (IP или доменное имя)
    int serverPort;             ///< Порт сервера
    std::string inputFileName;  ///< Имя входного файла с данными
    std::string outputFileName; ///< Имя выходного файла для результатов
    std::string configFileName; ///< Имя файла конфигурации с учетными данными
    std::string login;          ///< Логин пользователя
    std::string password;       ///< Пароль пользователя
    
    /**
     * @brief Конструктор по умолчанию
     * @details Инициализирует значения по умолчанию:
     * - serverPort: 33333
     * - configFileName: "~/.config/velient.conf"
     * - Остальные поля: пустые строки
     */
    ClientConfig();
};

/**
 * @brief Основной класс клиентского приложения
 * @details Обеспечивает управление всем жизненным циклом клиента:
 * парсинг аргументов командной строки, чтение конфигурации,
 * установку соединения с сервером, обработку данных и сохранение результатов.
 * @author Ежов Егор Александрович
 * @date 01.12.2025
 * @version 1.0
 */
class Client {
private:
    ClientConfig config;  ///< Конфигурация клиента
    
    /**
     * @brief Парсит аргументы командной строки
     * @param [in] argc Количество аргументов
     * @param [in] argv Массив аргументов
     * @return true если парсинг успешен, false в случае ошибки
     * @details Поддерживаемые аргументы:
     * - Обязательные: <адрес_сервера> <входной_файл> <выходной_файл>
     * - Опциональные:
     *   -p <порт> - порт сервера (по умолчанию: 33333)
     *   -c <файл_конфига> - файл с логином и паролем
     *   -h - вывод справки
     */
    bool parseCommandLineArgs(int argc, char* argv[]);
    
    /**
     * @brief Читает файл конфигурации с учетными данными
     * @return true если чтение успешно, false в случае ошибки
     * @details Формат файла конфигурации:
     * 1. Первая строка: логин
     * 2. Вторая строка: пароль
     */
    bool readConfigFile();
    
public:
    /**
     * @brief Основной метод запуска клиента
     * @param [in] argc Количество аргументов командной строки
     * @param [in] argv Массив аргументов командной строки
     * @return true если выполнение успешно, false в случае ошибки
     * @details Последовательность работы:
     * 1. Парсинг аргументов командной строки
     * 2. Чтение файла конфигурации
     * 3. Установка соединения с сервером
     * 4. Аутентификация
     * 5. Чтение и обработка данных
     * 6. Отправка данных на сервер
     * 7. Получение и сохранение результатов
     */
    bool run(int argc, char* argv[]);
};

#endif // CLIENT_H
